{{- /* Comments area start */ -}}
{{- /* to add comments read => https://gohugo.io/content-management/comments/ */ -}}
<div class="comments">
    <script>
        const getStoredTheme = () => localStorage.getItem("pref-theme") === "dark" ? "https://www.bytehero.io/css/dark_dimmed_bytehero.css" : "light";

        const setGiscusTheme = () => {
            const sendMessage = (message) => {
                const iframe = document.querySelector('iframe.giscus-frame');
                if (iframe) {
                    iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
                }
            }
            sendMessage({ setConfig: { theme: getStoredTheme() } })
        }

        document.addEventListener("DOMContentLoaded", () => {
            const giscusAttributes = {
                "src": "https://giscus.app/client.js",
                "data-repo": "mightyjens/mightyjens.github.io",
                "data-repo-id": "R_kgDOL4sLyw",
                "data-category": "General",
                "data-category-id": "DIC_kwDOL4sLy84CfOcb",
                "data-mapping": "pathname",
                "data-strict": "0",
                "data-reactions-enabled": "0",
                "data-emit-metadata": "0",
                "data-input-position": "bottom",
                "data-theme": getStoredTheme(),
                "data-lang": "en",
                "crossorigin": "anonymous",
                "async": "1"
            };

            // Dynamically create script tag.
            const giscusScript = document.createElement("script");
            Object.entries(giscusAttributes).forEach(
                ([key, value]) => giscusScript.setAttribute(key, value));
            console.log(giscusScript)
            document.querySelector(".comments").appendChild(giscusScript);

            // Update giscus theme when the theme switcher is clicked.
            const themeSwitcher = document.querySelector("#theme-toggle");
            if (themeSwitcher) {
                themeSwitcher.addEventListener("click", setGiscusTheme);
            }
        });
    </script>
</div>
{{- /* Comments area end */ -}}